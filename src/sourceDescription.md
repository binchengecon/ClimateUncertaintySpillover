# Description of files under `source/`

- ` modified_v6.py`: compute HJB with ambiguity between models and concern on model misspecification.
    <center>
    <a href="https://www.codecogs.com/eqnedit.php?latex=\begin{align*}&space;0=&&space;\max_e\min&space;\min_{h_2}&space;-&space;\delta\phi(y,z_2)&space;&plus;&space;\delta&space;\eta&space;\log&space;e&space;&plus;&space;\xi_m&space;\frac{(h_2)^2}{2}&space;&plus;\frac{\partial&space;\phi}{\partial&space;y}&space;(y,&space;z_2)&space;e&space;\\&space;&&space;&plus;&space;\frac{\partial&space;\phi}{\partial&space;z_2}(y,&space;z_2&space;)&space;[&space;-\rho&space;(&space;z_2&space;-&space;\mu_2&space;)&space;&plus;&space;\sqrt{z_2}&space;\sigma_2&space;h_2]&space;&plus;&space;[\frac{\partial^2&space;\phi}{\partial&space;(z_2)^2}(y,&space;z_2&space;)](\frac{z_2&space;\sigma_2^2}{2})&space;\\&space;&&space;&plus;v_n&space;\sum_j&space;\hat&space;\pi_j&space;(\Lambda'(yz_2)(z_2e&space;-&space;y\rho(z_2&space;-&space;\mu_2)&space;&plus;&space;y\sqrt{z_2}\sigma_2&space;h_2)&space;&plus;&space;\frac{\Lambda''(yz_2)}{2}&space;z_2&space;y^2&space;\sigma_2^2&space;)\\&space;&&space;&plus;\xi_a\sum_j\hat\pi_j(\log\hat\pi_j-\log\pi_j^0)&space;\end{align*}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\begin{align*}&space;0=&&space;\max_e\min&space;\min_{h_2}&space;-&space;\delta\phi(y,z_2)&space;&plus;&space;\delta&space;\eta&space;\log&space;e&space;&plus;&space;\xi_m&space;\frac{(h_2)^2}{2}&space;&plus;\frac{\partial&space;\phi}{\partial&space;y}&space;(y,&space;z_2)&space;e&space;\\&space;&&space;&plus;&space;\frac{\partial&space;\phi}{\partial&space;z_2}(y,&space;z_2&space;)&space;[&space;-\rho&space;(&space;z_2&space;-&space;\mu_2&space;)&space;&plus;&space;\sqrt{z_2}&space;\sigma_2&space;h_2]&space;&plus;&space;[\frac{\partial^2&space;\phi}{\partial&space;(z_2)^2}(y,&space;z_2&space;)](\frac{z_2&space;\sigma_2^2}{2})&space;\\&space;&&space;&plus;v_n&space;\sum_j&space;\hat&space;\pi_j&space;(\Lambda'(yz_2)(z_2e&space;-&space;y\rho(z_2&space;-&space;\mu_2)&space;&plus;&space;y\sqrt{z_2}\sigma_2&space;h_2)&space;&plus;&space;\frac{\Lambda''(yz_2)}{2}&space;z_2&space;y^2&space;\sigma_2^2&space;)\\&space;&&space;&plus;\xi_a\sum_j\hat\pi_j(\log\hat\pi_j-\log\pi_j^0)&space;\end{align*}" title="\begin{align*} 0=& \max_e\min \min_{h_2} - \delta\phi(y,z_2) + \delta \eta \log e + \xi_m \frac{(h_2)^2}{2} +\frac{\partial \phi}{\partial y} (y, z_2) e \\ & + \frac{\partial \phi}{\partial z_2}(y, z_2 ) [ -\rho ( z_2 - \mu_2 ) + \sqrt{z_2} \sigma_2 h_2] + [\frac{\partial^2 \phi}{\partial (z_2)^2}(y, z_2 )](\frac{z_2 \sigma_2^2}{2}) \\ & +v_n \sum_j \hat \pi_j (\Lambda'(yz_2)(z_2e - y\rho(z_2 - \mu_2) + y\sqrt{z_2}\sigma_2 h_2) + \frac{\Lambda''(yz_2)}{2} z_2 y^2 \sigma_2^2 )\\ & +\xi_a\sum_j\hat\pi_j(\log\hat\pi_j-\log\pi_j^0) \end{align*}" /></a>
    </center>
- `modified_v6_exper.py`: currently used to compute:
<center>
<a href="https://www.codecogs.com/eqnedit.php?latex=\begin{align*}&space;0&space;=&&space;\max_{e}\min_{h_2}\quad&space;-\delta\phi(y,&space;z_2)&space;&plus;&space;\delta&space;\eta&space;\log(e)&space;&plus;&space;\xi_m&space;\frac{h_2^2}{2}&space;\\&space;&&space;&plus;&space;\sum_j&space;\hat\pi_j&space;[\frac{\partial&space;\phi}{\partial&space;z_2}]&space;(-\rho(z&space;-&space;\mu_2)&space;&plus;&space;\sqrt{z_2}&space;\sigma_2&space;h_2&space;)&space;&plus;&space;\frac{\partial&space;\phi}{\partial&space;y}z_2&space;e&space;&plus;&space;\frac{\partial^2&space;\phi}{\partial&space;z_2^2}\frac{&space;z_2\sigma_2^2}{2}&space;\\&space;&&space;&plus;&space;v_n&space;\sum_j\hat\pi_j&space;\Lambda'(y)z_2e&space;&plus;&space;\xi_a&space;\sum_j&space;\hat\pi_j&space;(\log\hat\pi_j&space;-&space;\log\pi^0_j)&space;\end{align*}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\begin{align*}&space;0&space;=&&space;\max_{e}\min_{h_2}\quad&space;-\delta\phi(y,&space;z_2)&space;&plus;&space;\delta&space;\eta&space;\log(e)&space;&plus;&space;\xi_m&space;\frac{h_2^2}{2}&space;\\&space;&&space;&plus;&space;\sum_j&space;\hat\pi_j&space;[\frac{\partial&space;\phi}{\partial&space;z_2}]&space;(-\rho(z&space;-&space;\mu_2)&space;&plus;&space;\sqrt{z_2}&space;\sigma_2&space;h_2&space;)&space;&plus;&space;\frac{\partial&space;\phi}{\partial&space;y}z_2&space;e&space;&plus;&space;\frac{\partial^2&space;\phi}{\partial&space;z_2^2}\frac{&space;z_2\sigma_2^2}{2}&space;\\&space;&&space;&plus;&space;v_n&space;\sum_j\hat\pi_j&space;\Lambda'(y)z_2e&space;&plus;&space;\xi_a&space;\sum_j&space;\hat\pi_j&space;(\log\hat\pi_j&space;-&space;\log\pi^0_j)&space;\end{align*}" title="\begin{align*} 0 =& \max_{e}\min_{h_2}\quad -\delta\phi(y, z_2) + \delta \eta \log(e) + \xi_m \frac{h_2^2}{2} \\ & + \sum_j \hat\pi_j [\frac{\partial \phi}{\partial z_2}] (-\rho(z - \mu_2) + \sqrt{z_2} \sigma_2 h_2 ) + \frac{\partial \phi}{\partial y}z_2 e + \frac{\partial^2 \phi}{\partial z_2^2}\frac{ z_2\sigma_2^2}{2} \\ & + v_n \sum_j\hat\pi_j \Lambda'(y)z_2e + \xi_a \sum_j \hat\pi_j (\log\hat\pi_j - \log\pi^0_j) \end{align*}" /></a>
</center>

- `modified_v7.py`: compute HJB with only ambiguity aversion parameters
    <center>
    <a href="https://www.codecogs.com/eqnedit.php?latex=\begin{aligned}&space;&&space;0=&space;\max_e\min_{\hat\pi_j:\sum_j\hat\pi_j=1}&space;\hspace{.25cm}&space;-&space;\delta&space;\phi(y,z_2)&space;&plus;&space;\delta&space;\eta&space;\log&space;e&space;&plus;&space;\frac&space;{\partial&space;\phi}&space;{\partial&space;y}&space;(y,&space;z_2&space;)&space;e&space;\\&space;&&space;&plus;\sum_j\hat\pi_j&space;\left[{\frac&space;{\partial&space;\phi}{\partial&space;z_2}}(y,&space;z_2&space;)&space;\right]&space;\left[&space;-\rho&space;\left(&space;z_2&space;-&space;\mu_2(j)&space;\right)\right]&space;&plus;&space;\left[{\frac&space;{\partial^2&space;\phi}{\partial&space;(z_2)^2}}(y,&space;z_2&space;)\right]\left({\frac&space;{z_2&space;|\sigma_2|^2}&space;2}\right)&space;\\&space;&&space;&plus;v_n\sum_j\hat\pi_j(&space;\left[&space;\tau_1&space;&plus;&space;\tau_2&space;(y&space;z_2)&plus;\tau_2^&plus;(j)(yz_2-\bar\tau)\mathbb{I}\{yz_2>\bar\tau\}&space;\right]&space;\left(&space;z_2&space;e&space;-&space;y&space;\rho&space;\left(&space;z_2&space;-&space;\mu_2(j)&space;\right)&space;\right)&space;&plus;&space;{\frac&space;{\tau_2&plus;\tau_2^&plus;(j)\mathbb{I}\{yz_2>\bar\tau\}&space;}&space;2}z_2&space;y^2|\sigma_2|^2&space;)\\&space;&&space;&plus;\xi_a\sum_j\hat\pi_j(\log\hat\pi_j-\log\pi_j^0)&space;\end{aligned}" target="_blank"><img src="https://latex.codecogs.com/svg.latex?\begin{aligned}&space;&&space;0=&space;\max_e\min_{\hat\pi_j:\sum_j\hat\pi_j=1}&space;\hspace{.25cm}&space;-&space;\delta&space;\phi(y,z_2)&space;&plus;&space;\delta&space;\eta&space;\log&space;e&space;&plus;&space;\frac&space;{\partial&space;\phi}&space;{\partial&space;y}&space;(y,&space;z_2&space;)&space;e&space;\\&space;&&space;&plus;\sum_j\hat\pi_j&space;\left[{\frac&space;{\partial&space;\phi}{\partial&space;z_2}}(y,&space;z_2&space;)&space;\right]&space;\left[&space;-\rho&space;\left(&space;z_2&space;-&space;\mu_2(j)&space;\right)\right]&space;&plus;&space;\left[{\frac&space;{\partial^2&space;\phi}{\partial&space;(z_2)^2}}(y,&space;z_2&space;)\right]\left({\frac&space;{z_2&space;|\sigma_2|^2}&space;2}\right)&space;\\&space;&&space;&plus;v_n\sum_j\hat\pi_j(&space;\left[&space;\tau_1&space;&plus;&space;\tau_2&space;(y&space;z_2)&plus;\tau_2^&plus;(j)(yz_2-\bar\tau)\mathbb{I}\{yz_2>\bar\tau\}&space;\right]&space;\left(&space;z_2&space;e&space;-&space;y&space;\rho&space;\left(&space;z_2&space;-&space;\mu_2(j)&space;\right)&space;\right)&space;&plus;&space;{\frac&space;{\tau_2&plus;\tau_2^&plus;(j)\mathbb{I}\{yz_2>\bar\tau\}&space;}&space;2}z_2&space;y^2|\sigma_2|^2&space;)\\&space;&&space;&plus;\xi_a\sum_j\hat\pi_j(\log\hat\pi_j-\log\pi_j^0)&space;\end{aligned}" title="\begin{aligned} & 0= \max_e\min_{\hat\pi_j:\sum_j\hat\pi_j=1} \hspace{.25cm} - \delta \phi(y,z_2) + \delta \eta \log e + \frac {\partial \phi} {\partial y} (y, z_2 ) e \\ & +\sum_j\hat\pi_j \left[{\frac {\partial \phi}{\partial z_2}}(y, z_2 ) \right] \left[ -\rho \left( z_2 - \mu_2(j) \right)\right] + \left[{\frac {\partial^2 \phi}{\partial (z_2)^2}}(y, z_2 )\right]\left({\frac {z_2 |\sigma_2|^2} 2}\right) \\ & +v_n\sum_j\hat\pi_j( \left[ \tau_1 + \tau_2 (y z_2)+\tau_2^+(j)(yz_2-\bar\tau)\mathbb{I}\{yz_2>\bar\tau\} \right] \left( z_2 e - y \rho \left( z_2 - \mu_2(j) \right) \right) + {\frac {\tau_2+\tau_2^+(j)\mathbb{I}\{yz_2>\bar\tau\} } 2}z_2 y^2|\sigma_2|^2 )\\ & +\xi_a\sum_j\hat\pi_j(\log\hat\pi_j-\log\pi_j^0) \end{aligned}" /></a>
    </center>
- `utilities.py`: functions used in compute related terms in the previous HJBs
- `global-parameters.py`: global model parameters and grid settings
